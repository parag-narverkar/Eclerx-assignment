{"version":3,"file":"index.js","mappings":"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","sources":["webpack://bestseller-block/./src/attributes.js","webpack://bestseller-block/./src/edit.js","webpack://bestseller-block/./src/index.js","webpack://bestseller-block/./src/save.js","webpack://bestseller-block/./src/style.scss","webpack://bestseller-block/external window \"React\"","webpack://bestseller-block/external window \"ReactJSXRuntime\"","webpack://bestseller-block/external window [\"wp\",\"blockEditor\"]","webpack://bestseller-block/external window [\"wp\",\"blocks\"]","webpack://bestseller-block/external window [\"wp\",\"components\"]","webpack://bestseller-block/external window [\"wp\",\"element\"]","webpack://bestseller-block/webpack/bootstrap","webpack://bestseller-block/webpack/runtime/chunk loaded","webpack://bestseller-block/webpack/runtime/compat get default export","webpack://bestseller-block/webpack/runtime/define property getters","webpack://bestseller-block/webpack/runtime/hasOwnProperty shorthand","webpack://bestseller-block/webpack/runtime/make namespace object","webpack://bestseller-block/webpack/runtime/jsonp chunk loading","webpack://bestseller-block/webpack/before-startup","webpack://bestseller-block/webpack/startup","webpack://bestseller-block/webpack/after-startup"],"sourcesContent":["const attributes = {\n    selectedCategory: {\n        type: 'string',\n        default: '',\n    },\n    selectedBookId: { // Save the work ID\n        type: 'string',\n        default: '',\n    },\n    selectedBookTitle: { // Save the book title\n        type: 'string',\n        default: '',\n    },\n    selectedBookCover: {\n        type: 'string',\n        default: '',\n    },\n    selectedBookAuthors: {\n        type: 'array',\n        default: [],\n    },\n    selectedBookAmazonLink: {\n        type: 'string',\n        default: '',\n    },\n    blockTitle: {\n        type: 'string',\n        default: 'Bestsellers',\n    },\n    additionalImage: {\n        type: 'string',\n        default: '',\n    },\n};\n\nexport default attributes;\n","import React from 'react';\nimport { useState, useEffect } from '@wordpress/element';\nimport { InspectorControls, RichText } from '@wordpress/block-editor';\nimport { PanelBody, SelectControl } from '@wordpress/components';\nimport './style.scss';\n\nconst Edit = (props) => {\n    const { attributes, setAttributes } = props;\n\n    const [state, setState] = useState({\n        categories: [],\n        books: [],\n        loadingCategories: true,\n        loadingBooks: false,\n    });\n\n    const updateState = (updates) => setState((prevState) => ({ ...prevState, ...updates }));\n\n    useEffect(() => {\n        fetch(\n            \"https://api.penguinrandomhouse.com/resources/v2/title/domains/PRH.UK/categories?rows=15&catSetId=PW&api_key=7fqge2qgxcdrwqbcgeywwdj2\"\n        )\n            .then((response) => response.json())\n            .then((result) => {\n                if (result.data?.categories) {\n                    updateState({ categories: result.data.categories, loadingCategories: false });\n                } else {\n                    console.error(\"Categories array not found in response.\");\n                    updateState({ loadingCategories: false });\n                }\n            })\n            .catch((error) => {\n                console.error(\"Error fetching categories:\", error);\n                updateState({ loadingCategories: false });\n            });\n    }, []);\n\n    useEffect(() => {\n        if (attributes.selectedCategory) {\n            fetchBooks(attributes.selectedCategory, attributes.sortOrder);\n        }\n    }, [attributes.selectedCategory, attributes.sortOrder]);\n\n    const fetchBooks = (catUri, sortOrder = \"desc\") => {\n        updateState({ loadingBooks: true });\n        fetch(\n            `https://api.penguinrandomhouse.com/resources/v2/title/domains/PRH.UK/works/views/uk-list-display?catUri=${encodeURIComponent(\n                catUri\n            )}&sort=weeklySales&dir=${sortOrder}&api_key=7fqge2qgxcdrwqbcgeywwdj2`\n        )\n            .then((response) => response.json())\n            .then((result) => {\n                if (result.data?.works) {\n                    updateState({ books: result.data.works, loadingBooks: false });\n                } else {\n                    console.error(\"Books array not found in response.\");\n                    updateState({ books: [], loadingBooks: false });\n                }\n            })\n            .catch((error) => {\n                console.error(\"Error fetching books:\", error);\n                updateState({ books: [], loadingBooks: false });\n            });\n    };\n\n    const categoryOptions = state.categories.map((item) => ({\n        label: item.menuText,\n        value: item.catUri,\n    }));\n\n    const bookOptions = state.books.map((book) => ({\n        label: book.title,\n        value: book.workId,\n    }));\n\n    const handleBookChange = (selectedBookId) => {\n        const book = state.books.find((b) => b.workId === parseInt(selectedBookId));\n        const coverUrl = book?.coverUrls?.large?.coverUrl || '';\n        const amazonLink = book?.affiliateLinks?.find((link) => link.affiliateType === \"amazon\")?.url;\n        const authors = book?.authors?.map((author) => author.authorDisplay) || [];\n\n        setAttributes({\n            selectedBookId: book?.workId || '',\n            selectedBookTitle: book?.title || '',\n            selectedBookCover: coverUrl,\n            selectedBookAmazonLink: amazonLink || '',\n            selectedBookAuthors: authors,\n        });\n    };\n\n    return (\n        <>\n            <InspectorControls>\n                <PanelBody title=\"Category and Books Settings\" initialOpen={true}>\n                    {state.loadingCategories ? (\n                        <p>Loading categories...</p>\n                    ) : (\n                        <SelectControl\n                            label=\"Select a Genre\"\n                            value={attributes.selectedCategory || \"\"}\n                            options={[{ label: \"Select a category\", value: \"\" }, ...categoryOptions]}\n                            onChange={(selectedCategory) => {\n                                setAttributes({ selectedCategory });\n                                fetchBooks(selectedCategory, attributes.sortOrder);\n                            }}\n                        />\n                    )}\n                    {attributes.selectedCategory && state.loadingBooks ? (\n                        <p>Loading books...</p>\n                    ) : attributes.selectedCategory ? (\n                        <SelectControl\n                            label=\"Select a Book\"\n                            value={attributes.selectedBookId || \"\"}\n                            options={[{ label: \"Select a book\", value: \"\" }, ...bookOptions]}\n                            onChange={handleBookChange}\n                        />\n                    ) : null}\n                    <SelectControl\n                        label=\"Sort Order\"\n                        value={attributes.sortOrder}\n                        options={[\n                            { label: \"Descending (Most Sales First)\", value: \"desc\" },\n                            { label: \"Ascending (Least Sales First)\", value: \"asc\" },\n                        ]}\n                        onChange={(newSortOrder) => setAttributes({ sortOrder: newSortOrder })}\n                    />\n                </PanelBody>\n            </InspectorControls>\n\n            <div className=\"bestsellers-container\">\n                <RichText\n                    tagName=\"h2\"\n                    className=\"bestsellers-title\"\n                    value={attributes.blockTitle || 'Bestsellers'}\n                    onChange={(newTitle) => setAttributes({ blockTitle: newTitle })}\n                    placeholder=\"Enter block title...\"\n                />\n                {attributes.selectedBookId ? (\n                    <div className=\"book-details\">\n                        <img\n                            src={attributes.selectedBookCover || \"\"}\n                            alt={attributes.selectedBookTitle}\n                        />\n                        \n                        \n                        <p>{attributes.selectedBookTitle}</p>\n                        {attributes.selectedBookAuthors.length > 0 ? (\n                            <p>{attributes.selectedBookAuthors.join(\", \")}</p>\n                        ) : (\n                            <p><strong>Author(s):</strong> Unknown</p>\n                        )}\n                        {attributes.selectedBookAmazonLink ? (\n                            <p className=\"amazon-button\">\n                                <a\n                                    href={attributes.selectedBookAmazonLink}\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                >\n                                    Buy from Amazon \n                                </a>\n                            </p>\n                        ) : (\n                            <p>No Amazon link available</p>\n                        )}\n                        <div className=\"additional-image\">\n                            <MediaUploadCheck>\n                                <MediaUpload\n                                    onSelect={(media) => setAttributes({ additionalImage: media.url })}\n                                    allowedTypes={['image']}\n                                    render={({ open }) => (\n                                        <Button onClick={open} variant=\"secondary\">\n                                            {attributes.additionalImage ? 'Change Additional Image' : 'Upload Additional Image'}\n                                        </Button>\n                                    )}\n                                />\n                            </MediaUploadCheck>\n                            {attributes.additionalImage && (\n                                <img\n                                    src={attributes.additionalImage}\n                                    alt=\"Additional uploaded image\"\n                                    style={{ marginTop: '10px', maxWidth: '100%' }}\n                                />\n                            )}\n                        </div>\n                    </div>\n                ) : (\n                    <p>No book selected</p>\n                )}\n            </div>\n        </>\n    );\n};\n\nexport default Edit;\n","import { registerBlockType } from '@wordpress/blocks';\nimport Edit from './edit';\nimport Save from './save';\nimport attributes from './attributes';\n\nregisterBlockType('my-block/category-book-selector', {\n    title: 'Bestseller Block',\n    category: 'widgets',\n    icon: 'book',\n    attributes,\n    edit: Edit,\n    save: Save,\n});\n","import { RichText } from '@wordpress/block-editor';\nimport './style.scss';\n\nconst Save = ({ attributes }) => {\n    const {\n        selectedBookId,\n        selectedBookTitle,\n        selectedBookCover,\n        selectedBookAuthors,\n        selectedBookAmazonLink,\n        blockTitle,\n        additionalImage, // Include the new attribute\n    } = attributes;\n\n    return (\n        <div className=\"bestsellers-container\">\n            <RichText.Content\n                tagName=\"h2\"\n                className=\"bestsellers-title\"\n                value={blockTitle || 'Bestsellers'}\n            />\n\n            {selectedBookId ? (\n                <div className=\"book-details\">\n                    <img\n                        src={selectedBookCover || \"\"}\n                        alt={selectedBookTitle}\n                    />\n                    <p>{selectedBookTitle}</p>\n                    {selectedBookAuthors.length > 0 ? (\n                        <p>{selectedBookAuthors.join(\", \")}</p>\n                    ) : (\n                        <p><strong>Author(s):</strong> Unknown</p>\n                    )}\n\n                    {selectedBookAmazonLink ? (\n                        <p className=\"amazon-button\">\n                            <a\n                                href={selectedBookAmazonLink}\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                            >\n                                Buy from Amazon\n                            </a>\n                        </p>\n                    ) : (\n                        <p>No Amazon link available</p>\n                    )}\n\n                    {/* Render the additional image */}\n                    {additionalImage && (\n                        <div className=\"additional-image\">\n                            <img\n                                src={additionalImage}\n                                alt=\"Additional uploaded image\"\n                                style={{ marginTop: '10px', maxWidth: '100%' }}\n                            />\n                        </div>\n                    )}\n                </div>\n            ) : (\n                <p>No book selected</p>\n            )}\n        </div>\n    );\n};\n\nexport default Save;\n","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"React\"];","module.exports = window[\"ReactJSXRuntime\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"index\": 0,\n\t\"./style-index\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkbestseller_block\"] = globalThis[\"webpackChunkbestseller_block\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"./style-index\"], () => (__webpack_require__(\"./src/index.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["attributes","selectedCategory","type","default","selectedBookId","selectedBookTitle","selectedBookCover","selectedBookAuthors","selectedBookAmazonLink","blockTitle","additionalImage","React","useState","useEffect","InspectorControls","RichText","PanelBody","SelectControl","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Edit","props","setAttributes","state","setState","categories","books","loadingCategories","loadingBooks","updateState","updates","prevState","fetch","then","response","json","result","data","console","error","catch","fetchBooks","sortOrder","catUri","encodeURIComponent","works","categoryOptions","map","item","label","menuText","value","bookOptions","book","title","workId","handleBookChange","find","b","parseInt","coverUrl","coverUrls","large","amazonLink","affiliateLinks","link","affiliateType","url","authors","author","authorDisplay","children","initialOpen","options","onChange","newSortOrder","className","tagName","newTitle","placeholder","src","alt","length","join","href","target","rel","MediaUploadCheck","MediaUpload","onSelect","media","allowedTypes","render","open","Button","onClick","variant","style","marginTop","maxWidth","registerBlockType","Save","category","icon","edit","save","Content"],"sourceRoot":""}